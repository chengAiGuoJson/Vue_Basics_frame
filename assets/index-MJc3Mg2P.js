import{Z as z,$,o as F,a0 as A,a1 as m,a2 as N,v as I,a3 as B,a4 as D,B as S,a5 as w,x as U,z as G,d as Q,r as T,a6 as Y,c as E,a as O,b as j,F as _,f as Z}from"./index-DvvvYLvU.js";function H(e,t){return z()?($(e,t),!0):!1}const C=new WeakMap,J=(...e)=>{var t;const n=e[0],r=(t=N())===null||t===void 0?void 0:t.proxy,a=r??z();if(a==null&&!B())throw new Error("injectLocal must be called in setup");return a&&C.has(a)&&n in C.get(a)?C.get(a)[n]:D(...e)},K=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=e=>e!=null,q=Object.prototype.toString,ee=e=>q.call(e)==="[object Object]",y=()=>{};function te(e,t){function n(...r){return new Promise((a,d)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(a).catch(d)})}return n}function ne(e,t={}){let n,r,a=y;const d=o=>{clearTimeout(o),a(),a=y};let c;return o=>{const s=m(e),u=m(t.maxWait);return n&&d(n),s<=0||u!==void 0&&u<=0?(r&&(d(r),r=void 0),Promise.resolve(o())):new Promise((l,h)=>{a=t.rejectOnCancel?h:l,c=o,u&&!r&&(r=setTimeout(()=>{n&&d(n),r=void 0,l(c())},u)),n=setTimeout(()=>{r&&d(r),r=void 0,l(o())},s)})}}function k(e){return e.endsWith("rem")?Number.parseFloat(e)*16:Number.parseFloat(e)}function M(e){return Array.isArray(e)?e:[e]}function oe(e){return N()}function ie(e,t=200,n={}){return te(ne(t,n),e)}function se(e,t=!0,n){oe()?F(e,n):t?e():A(e)}function re(e,t,n){return I(e,t,{...n,immediate:!0})}const x=K?window:void 0;function W(e){var t;const n=m(e);return(t=n==null?void 0:n.$el)!==null&&t!==void 0?t:n}function V(...e){const t=[],n=()=>{t.forEach(i=>i()),t.length=0},r=(i,o,s,u)=>(i.addEventListener(o,s,u),()=>i.removeEventListener(o,s,u)),a=S(()=>{const i=M(m(e[0])).filter(o=>o!=null);return i.every(o=>typeof o!="string")?i:void 0}),d=re(()=>{var i,o;return[(i=(o=a.value)===null||o===void 0?void 0:o.map(s=>W(s)))!==null&&i!==void 0?i:[x].filter(s=>s!=null),M(m(a.value?e[1]:e[0])),M(G(a.value?e[2]:e[1])),m(a.value?e[3]:e[2])]},([i,o,s,u])=>{if(n(),!(i!=null&&i.length)||!(o!=null&&o.length)||!(s!=null&&s.length))return;const l=ee(u)?{...u}:u;t.push(...i.flatMap(h=>o.flatMap(f=>s.map(g=>r(h,f,g,l)))))},{flush:"post"}),c=()=>{d(),n()};return H(n),c}function ae(){const e=w(!1),t=N();return t&&F(()=>{e.value=!0},t),e}function L(e){const t=ae();return S(()=>(t.value,!!e()))}const ue=Symbol("vueuse-ssr-width");function le(){const e=B()?J(ue,null):null;return typeof e=="number"?e:void 0}function ce(e,t={}){const{window:n=x,ssrWidth:r=le()}=t,a=L(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function"),d=w(typeof r=="number"),c=w(),i=w(!1),o=s=>{i.value=s.matches};return U(()=>{if(d.value){d.value=!a.value,i.value=m(e).split(",").some(s=>{const u=s.includes("not all"),l=s.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),h=s.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let f=!!(l||h);return l&&f&&(f=r>=k(l[1])),h&&f&&(f=r<=k(h[1])),u?!f:f});return}a.value&&(c.value=n.matchMedia(m(e)),i.value=c.value.matches)}),V(c,"change",o,{passive:!0}),S(()=>i.value)}function de(e,t,n={}){const{root:r,rootMargin:a="0px",threshold:d=0,window:c=x,immediate:i=!0}=n,o=L(()=>c&&"IntersectionObserver"in c),s=S(()=>M(m(e)).map(W).filter(X));let u=y;const l=w(i),h=o.value?I(()=>[s.value,W(r),l.value],([g,v])=>{if(u(),!l.value||!g.length)return;const p=new IntersectionObserver(t,{root:W(v),rootMargin:a,threshold:d});g.forEach(b=>b&&p.observe(b)),u=()=>{p.disconnect(),u=y}},{immediate:i,flush:"post"}):y,f=()=>{u(),h(),l.value=!1};return H(f),{isSupported:o,isActive:l,pause(){u(),l.value=!1},resume(){l.value=!0},stop:f}}function fe(e={}){const{window:t=x,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:a=!0,includeScrollbar:d=!0,type:c="inner"}=e,i=w(n),o=w(r),s=()=>{if(t)if(c==="outer")i.value=t.outerWidth,o.value=t.outerHeight;else if(c==="visual"&&t.visualViewport){const{width:l,height:h,scale:f}=t.visualViewport;i.value=Math.round(l*f),o.value=Math.round(h*f)}else d?(i.value=t.innerWidth,o.value=t.innerHeight):(i.value=t.document.documentElement.clientWidth,o.value=t.document.documentElement.clientHeight)};s(),se(s);const u={passive:!0};return V("resize",s,u),t&&c==="visual"&&t.visualViewport&&V(t.visualViewport,"resize",s,u),a&&I(ce("(orientation: portrait)"),()=>s()),{width:i,height:o}}const he={class:"grid grid-cols-[repeat(auto-fit,minmax(400px,1fr))] gap-4"},ve=["src"],P=400,me=Q({__name:"index",setup(e){const t=T([]),n=T(null),r=T(!1),a=()=>Date.now().toString(36)+Math.random().toString(36).slice(2),d=()=>`https://picsum.photos/400/400?hash=${a()}`,c=v=>{if(!r.value){r.value=!0;for(let p=0;p<v;p++)t.value.push(d());r.value=!1}},i=()=>{const v=Math.max(1,Math.floor(window.innerWidth/P)),p=Math.max(1,Math.ceil(window.innerHeight/P));return v*p};let o=null,s=null;const{width:u,height:l}=fe(),h=()=>{const v=i();return Math.max(0,v-t.value.length)},g=ie(()=>{const v=h();v>0&&c(v)},200);return F(()=>{c(i());const{stop:v}=de(n,([p])=>{if(console.log(p),p&&p.isIntersecting){const b=Math.max(1,Math.floor(window.innerWidth/P));c(b)}});o=v,s=I([u,l],()=>{g()})}),Y(()=>{o&&o(),s&&s()}),(v,p)=>(O(),E(_,null,[j("div",he,[(O(!0),E(_,null,Z(t.value,(b,R)=>(O(),E("div",{key:R,class:"bg-[#f0f0f0] p-4 flex items-center justify-center min-w-400px min-h-400px"},[j("img",{src:b,alt:"",class:"w-full h-full object-cover"},null,8,ve)]))),128))]),j("div",{ref_key:"infiniteSentinel",ref:n,class:"h-1"},null,512)],64))}});export{me as default};
