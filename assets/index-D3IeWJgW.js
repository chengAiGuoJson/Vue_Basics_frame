/* empty css                  *//* empty css                    *//* empty css               */import{d as W,r as C,v as K,B as se,o as oe,C as c,a as i,w as v,c as $,q as A,F as T,f as z,D as ne,g as O,E as re,s as R,e as q,t as k,G as ue,I as ie,h as de,J as S,K as me,L as ce,M as pe,N as be,O as ve,P as ge,k as he,Q as ye,_ as j,b as r,l as B}from"./index-C1VS4Rnx.js";const fe={key:7,class:"form-help"},_e=W({__name:"index",props:{config:{},modelValue:{default:()=>({})},validateOnMount:{type:Boolean,default:!1}},emits:["update:modelValue","submit","reset","validate"],setup(d,{expose:x,emit:I}){const h=d,_=I,n=C({}),y=C({}),V=C(!1),w=C(),Y=()=>{const t={};h.config.fields.forEach(a=>{a.defaultValue!==void 0?t[a.name]=a.defaultValue:a.type==="checkbox"?t[a.name]=[]:t[a.name]=""}),Object.assign(t,h.modelValue),n.value=t},X=t=>{const a={...t.attrs};switch(t.type){case"text":a.type="text";break;case"email":a.type="email";break;case"password":a.type="password",a.showPassword=!0;break;case"number":a.type="number";break;case"textarea":a.type="textarea",a.rows=4;break;case"date":a.type="date",a.format="YYYY-MM-DD",a.valueFormat="YYYY-MM-DD";break;case"select":a.clearable=!0,a.filterable=!0;break;case"file":a.action="#",a.autoUpload=!1;break}return a},F=t=>{var a;return((a=t.validation)==null?void 0:a.some(u=>u.required))||!1},N=t=>t.validation?t.validation.map(a=>({required:a.required,message:a.message||`${t.label}是必填项`,min:a.min,max:a.max,pattern:a.pattern,validator:a.validator?(u,m,s)=>{const f=a.validator(m);f===!0?s():s(new Error(typeof f=="string"?f:a.message||`${t.label}验证失败`))}:void 0,trigger:["blur","change"]})):[],g=t=>{const a=h.config.fields.find(s=>s.name===t);if(!a||!a.validation)return delete y.value[t],!0;const u=n.value[t],m=[];return a.validation.forEach(s=>{if(s.required&&(!u||Array.isArray(u)&&u.length===0)&&m.push(s.message||`${a.label}是必填项`),u&&s.min!==void 0&&(typeof u=="string"&&u.length<s.min?m.push(s.message||`${a.label}最少${s.min}个字符`):typeof u=="number"&&u<s.min&&m.push(s.message||`${a.label}最小值为${s.min}`)),u&&s.max!==void 0&&(typeof u=="string"&&u.length>s.max?m.push(s.message||`${a.label}最多${s.max}个字符`):typeof u=="number"&&u>s.max&&m.push(s.message||`${a.label}最大值为${s.max}`)),u&&s.pattern&&!s.pattern.test(u)&&m.push(s.message||`${a.label}格式不正确`),s.validator){const f=s.validator(u);f!==!0&&m.push(typeof f=="string"?f:s.message||`${a.label}验证失败`)}}),m.length>0?y.value[t]=m[0]:delete y.value[t],m.length===0},U=async()=>{if(w.value)try{return await w.value.validate(),_("validate",!0,{}),!0}catch(a){return _("validate",!1,a),!1}let t=!0;return h.config.fields.forEach(a=>{g(a.name)||(t=!1)}),_("validate",t,y.value),t},b=async()=>{if(await U()){V.value=!0;try{_("submit",{...n.value})}finally{V.value=!1}}},o=()=>{w.value&&w.value.resetFields(),Y(),y.value={},_("reset")};K(n,t=>{_("update:modelValue",t)},{deep:!0}),K(()=>h.modelValue,t=>{t&&Object.assign(n.value,t)},{deep:!0}),x({validate:U,reset:o,getFormData:()=>n.value,setFieldValue:(t,a)=>{n.value[t]=a}});const D=se(()=>{const t={};return h.config.fields.forEach(a=>{a.validation&&(t[a.name]=N(a))}),t}),G=(t,a)=>{n.value[t]=a,g(t)};return oe(()=>{Y(),h.validateOnMount&&U()}),(t,a)=>{const u=de,m=ce,s=me,f=be,Q=pe,Z=ge,ee=ve,ae=he,P=re,te=ye,J=ne,le=ie;return i(),c(le,{ref_key:"elFormRef",ref:w,model:n.value,rules:D.value,"label-width":t.config.labelWidth||"120px","label-position":t.config.layout==="horizontal"?"left":"top",inline:t.config.layout==="inline",size:t.config.size||"default",class:R(["base-form",`base-form--${t.config.layout||"vertical"}`,t.config.className]),onSubmit:ue(b,["prevent"])},{default:v(()=>[(i(!0),$(T,null,z(t.config.fields,e=>(i(),c(J,{key:e.name,label:e.label,prop:e.name,required:F(e),class:R(["form-field",`form-field--${e.type}`,e.className])},{default:v(()=>{var M,E,H;return[["text","email","password","number"].includes(e.type)?(i(),c(u,S({key:0,modelValue:n.value[e.name],"onUpdate:modelValue":l=>n.value[e.name]=l,type:X(e).type,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,"show-password":e.type==="password",clearable:!0},{ref_for:!0},e.attrs,{onBlur:l=>g(e.name)}),null,16,["modelValue","onUpdate:modelValue","type","placeholder","disabled","readonly","show-password","onBlur"])):e.type==="textarea"?(i(),c(u,S({key:1,modelValue:n.value[e.name],"onUpdate:modelValue":l=>n.value[e.name]=l,type:"textarea",placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,rows:((M=e.attrs)==null?void 0:M.rows)||4,clearable:!0},{ref_for:!0},e.attrs,{onBlur:l=>g(e.name)}),null,16,["modelValue","onUpdate:modelValue","placeholder","disabled","readonly","rows","onBlur"])):e.type==="select"?(i(),c(s,S({key:2,modelValue:n.value[e.name],"onUpdate:modelValue":l=>n.value[e.name]=l,placeholder:e.placeholder||"请选择",disabled:e.disabled,clearable:!0,filterable:!0,style:{width:"100%"}},{ref_for:!0},e.attrs,{onChange:l=>g(e.name)}),{default:v(()=>[(i(!0),$(T,null,z(e.options,l=>(i(),c(m,{key:l.value,label:l.label,value:l.value,disabled:l.disabled},null,8,["label","value","disabled"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue","placeholder","disabled","onChange"])):e.type==="radio"?(i(),c(Q,S({key:3,modelValue:n.value[e.name],"onUpdate:modelValue":l=>n.value[e.name]=l,disabled:e.disabled},{ref_for:!0},e.attrs,{onChange:l=>g(e.name)}),{default:v(()=>[(i(!0),$(T,null,z(e.options,l=>(i(),c(f,{key:l.value,label:l.value,disabled:l.disabled},{default:v(()=>[q(k(l.label),1)]),_:2},1032,["label","disabled"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue","disabled","onChange"])):e.type==="checkbox"?(i(),c(ee,S({key:4,modelValue:n.value[e.name],"onUpdate:modelValue":l=>n.value[e.name]=l,disabled:e.disabled},{ref_for:!0},e.attrs,{onChange:l=>g(e.name)}),{default:v(()=>[(i(!0),$(T,null,z(e.options,l=>(i(),c(Z,{key:l.value,label:l.value,disabled:l.disabled},{default:v(()=>[q(k(l.label),1)]),_:2},1032,["label","disabled"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue","disabled","onChange"])):e.type==="date"?(i(),c(ae,S({key:5,modelValue:n.value[e.name],"onUpdate:modelValue":l=>n.value[e.name]=l,type:"date",placeholder:e.placeholder||"选择日期",disabled:e.disabled,readonly:e.readonly,clearable:!0,format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},{ref_for:!0},e.attrs,{onChange:l=>g(e.name)}),null,16,["modelValue","onUpdate:modelValue","placeholder","disabled","readonly","onChange"])):e.type==="file"?(i(),c(te,S({key:6,disabled:e.disabled,multiple:(E=e.attrs)==null?void 0:E.multiple,accept:(H=e.attrs)==null?void 0:H.accept,"auto-upload":!1,action:"#"},{ref_for:!0},e.attrs,{onChange:l=>G(e.name,l)}),{default:v(()=>[O(P,{type:"primary"},{default:v(()=>[...a[0]||(a[0]=[q("选择文件",-1)])]),_:1})]),_:1},16,["disabled","multiple","accept","onChange"])):A("",!0),e.help?(i(),$("div",fe,k(e.help),1)):A("",!0)]}),_:2},1032,["label","prop","required","class"]))),128)),t.config.showButtons!==!1?(i(),c(J,{key:0,class:"form-actions"},{default:v(()=>{var e,M;return[O(P,{type:"primary",loading:V.value,class:R((e=t.config.submitButton)==null?void 0:e.className),onClick:b},{default:v(()=>{var E;return[q(k(((E=t.config.submitButton)==null?void 0:E.text)||"提交"),1)]}),_:1},8,["loading","class"]),t.config.showResetButton!==!1?(i(),c(P,{key:0,class:R((M=t.config.resetButton)==null?void 0:M.className),onClick:o},{default:v(()=>{var E;return[q(k(((E=t.config.resetButton)==null?void 0:E.text)||"重置"),1)]}),_:1},8,["class"])):A("",!0)]}),_:1})):A("",!0)]),_:1},8,["model","rules","label-width","label-position","inline","size","class"])}}}),L=j(_e,[["__scopeId","data-v-6d207672"]]);var p=(d=>(d.TEXT="text",d.EMAIL="email",d.PASSWORD="password",d.NUMBER="number",d.TEXTAREA="textarea",d.SELECT="select",d.CHECKBOX="checkbox",d.RADIO="radio",d.DATE="date",d.FILE="file",d))(p||{});const Ve={class:"form-component-test-container"},Ee={class:"test-section"},ke={class:"test-section"},Ce={class:"test-section"},xe={class:"test-section"},we={class:"data-display"},De={class:"data-item"},Se={class:"data-item"},Be={class:"data-item"},$e=W({__name:"index",setup(d){const x=C(),I={layout:"vertical",size:"default",fields:[{name:"username",label:"用户名",type:p.TEXT,placeholder:"请输入用户名",validation:[{required:!0,message:"用户名不能为空"},{min:3,max:20,message:"用户名长度应在3-20个字符之间"}]},{name:"email",label:"邮箱",type:p.EMAIL,placeholder:"请输入邮箱地址",validation:[{required:!0,message:"邮箱不能为空"},{min:2,max:50,message:"邮箱长度应在2-50个字符之间"}]},{name:"password",label:"密码",type:p.PASSWORD,placeholder:"请输入密码",validation:[{required:!0,message:"密码不能为空"},{min:6,message:"密码长度不能少于6位"}]}]},h={layout:"horizontal",labelWidth:"100px",size:"default",fields:[{name:"name",label:"姓名",type:p.TEXT,placeholder:"请输入姓名",validation:[{required:!0}]},{name:"age",label:"年龄",type:p.NUMBER,placeholder:"请输入年龄",validation:[{required:!0},{min:1,max:120,message:"年龄应在1-120之间"}]},{name:"phone",label:"电话",type:p.TEXT,placeholder:"请输入电话号码",validation:[{pattern:/^1[3-9]\d{9}$/,message:"请输入有效的手机号码"}]}]},_={layout:"vertical",size:"default",showValidation:!0,fields:[{name:"title",label:"标题",type:p.TEXT,placeholder:"请输入标题",validation:[{required:!0}]},{name:"category",label:"分类",type:p.SELECT,placeholder:"请选择分类",options:[{label:"技术",value:"tech"},{label:"生活",value:"life"},{label:"工作",value:"work"},{label:"学习",value:"study"}],validation:[{required:!0}]},{name:"priority",label:"优先级",type:p.RADIO,options:[{label:"低",value:"low"},{label:"中",value:"medium"},{label:"高",value:"high"}],defaultValue:"medium"},{name:"tags",label:"标签",type:p.CHECKBOX,options:[{label:"Vue",value:"vue"},{label:"TypeScript",value:"typescript"},{label:"JavaScript",value:"javascript"},{label:"CSS",value:"css"}]},{name:"description",label:"描述",type:p.TEXTAREA,placeholder:"请输入详细描述",validation:[{required:!0},{min:10,max:500,message:"描述长度应在10-500个字符之间"}]},{name:"publishDate",label:"发布日期",type:p.DATE,validation:[{required:!0}]},{name:"isPublic",label:"是否公开",type:p.CHECKBOX,options:[{label:"公开发布",value:!0}]}]},n=C({}),y=C({}),V=C({}),w=b=>{console.log("基础表单提交:",b),B.success("基础表单提交成功！请查看控制台输出")},Y=b=>{console.log("水平表单提交:",b),B.success("水平表单提交成功！请查看控制台输出")},X=b=>{console.log("复杂表单提交:",b),B.success("复杂表单提交成功！请查看控制台输出")},F=(b,o)=>{console.log("表单验证结果:",{isValid:b,errors:o})},N=()=>{x.value&&(x.value.validate()?B.success("表单验证通过"):B.error("表单验证失败，请检查错误信息"))},g=()=>{x.value&&(x.value.reset(),B.info("表单已重置"))},U=()=>{V.value={title:"测试标题",category:"tech",priority:"high",tags:["vue","typescript"],description:"这是一个测试描述，用于演示表单组件的功能。",publishDate:new Date().toISOString().split("T")[0],isPublic:[!0]},B.success("测试数据已填充")};return(b,o)=>(i(),$("div",Ve,[o[10]||(o[10]=r("h2",{class:"theme-title medium"},"表单组件测试",-1)),r("div",Ee,[o[3]||(o[3]=r("h3",null,"基础表单测试",-1)),O(L,{config:I,modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=D=>n.value=D),onSubmit:w,onValidate:F},null,8,["modelValue"])]),r("div",ke,[o[4]||(o[4]=r("h3",null,"水平布局表单测试",-1)),O(L,{config:h,modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=D=>y.value=D),onSubmit:Y},null,8,["modelValue"])]),r("div",Ce,[o[5]||(o[5]=r("h3",null,"复杂表单测试",-1)),O(L,{config:_,modelValue:V.value,"onUpdate:modelValue":o[2]||(o[2]=D=>V.value=D),onSubmit:X,ref_key:"complexFormRef",ref:x},null,8,["modelValue"]),r("div",{class:"form-actions"},[r("button",{onClick:N,class:"btn btn-info"},"验证表单"),r("button",{onClick:g,class:"btn btn-warning"},"重置表单"),r("button",{onClick:U,class:"btn btn-success"},"填充测试数据")])]),r("div",xe,[o[9]||(o[9]=r("h3",null,"表单数据展示",-1)),r("div",we,[r("div",De,[o[6]||(o[6]=r("h4",null,"基础表单数据:",-1)),r("pre",null,k(JSON.stringify(n.value,null,2)),1)]),r("div",Se,[o[7]||(o[7]=r("h4",null,"水平表单数据:",-1)),r("pre",null,k(JSON.stringify(y.value,null,2)),1)]),r("div",Be,[o[8]||(o[8]=r("h4",null,"复杂表单数据:",-1)),r("pre",null,k(JSON.stringify(V.value,null,2)),1)])])])]))}}),Ye=j($e,[["__scopeId","data-v-d6e88f67"]]);export{Ye as default};
